<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Entra√Ænement Vocabulaire Pelckmans (Saved)</title>
    <style>
        :root { --primary: #3498db; --success: #2ecc71; --danger: #e74c3c; --bg: #121212; --card: #1e1e1e; --accent: #f1c40f; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; }
        #container { width: 95%; max-width: 1100px; margin: 40px auto; text-align: center; }
        
        .selector-container { background: var(--card); padding: 25px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #333; }
        select { padding: 12px; background: #333; color: white; border-radius: 6px; border: 1px solid var(--primary); font-size: 16px; width: 300px; cursor: pointer; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .set-card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #333; transition: 0.3s; }
        .set-card:hover { border-color: var(--primary); transform: translateY(-3px); }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-size: 15px; width: 100%; margin-top: 10px; transition: 0.3s; font-weight: bold; }
        .btn-secondary { background: #555; }
        .btn:hover { filter: brightness(1.2); }

        .screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 100; justify-content: center; align-items: center; flex-direction: column; }
        
        #word-display { font-size: 60px; font-weight: bold; margin: 40px 0; color: var(--accent); text-shadow: 2px 2px 10px rgba(0,0,0,0.5); padding: 0 20px; text-align: center; }
        #timer-container { width: 70%; height: 12px; background: #333; border-radius: 6px; margin: 20px auto; overflow: hidden; }
        #timer-bar { width: 100%; height: 100%; background: var(--success); transition: width 1s linear; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #444; text-align: left; }
        th { background: #333; color: var(--primary); }
        .scroll-area { width: 90%; max-height: 70vh; overflow-y: auto; background: #1e1e1e; padding: 20px; border-radius: 10px; }
        
        input[type="text"] { background: #333; color: white; border: 1px solid #555; padding: 8px; width: 90%; border-radius: 4px; }
    </style>
</head>
<body>

<div id="container">
    <h1>Entra√Ænement Vocabulaire Pelckmans</h1>
    <p style="color: #888;">Wijzigingen worden automatisch opgeslagen op dit apparaat.</p>
    
    <div class="selector-container">
        <label style="margin-right: 15px;">Choisir le Th√®me :</label>
        <select id="trajet-select" onchange="generateSets(this.value)">
            <option value="">-- Faites un choix --</option>
            <option value="8">La mobilit√© et le mouvement</option>
            <option value="9">L'Art & Culture</option>
            <option value="10">Voyage en France</option>
        </select>
    </div>

    <div class="grid" id="set-grid"></div>
</div>

<div id="edit-screen" class="screen">
    <h2 id="edit-title">Modifier la S√©rie</h2>
    <div class="scroll-area">
        <table id="edit-table">
            <thead>
                <tr><th>N√©erlandais</th><th>Fran√ßais</th><th>Action</th></tr>
            </thead>
            <tbody id="edit-body"></tbody>
        </table>
        <button class="btn btn-secondary" onclick="addRow()" style="margin-top:10px;">+ Ajouter un mot</button>
    </div>
    <div style="display:flex; gap:15px; width: 90%; max-width: 500px; margin-top: 20px;">
        <button class="btn" onclick="saveAndStart()">üöÄ Enregistrer et Commencer</button>
        <button class="btn btn-secondary" onclick="closeEdit()">Annuler</button>
    </div>
</div>

<div id="exercise" class="screen">
    <div id="info-header" style="font-size: 1.2rem; color: #aaa;"></div>
    <div id="timer-container"><div id="timer-bar"></div></div>
    <div id="word-display">Chargement...</div>
    <div style="display:flex; gap:15px;">
        <button class="btn" style="width:140px; background:#555;" id="pause-btn" onclick="togglePause()">Pause</button>
        <button class="btn" style="width:140px; background:var(--danger);" onclick="location.reload()">Arr√™ter</button>
    </div>
</div>

<div id="result" class="screen">
    <h2 style="color: var(--success);">S√©rie termin√©e !</h2>
    <div class="scroll-area">
        <table>
            <thead><tr><th>N√©erlandais</th><th>Fran√ßais</th></tr></thead>
            <tbody id="res-body"></tbody>
        </table>
    </div>
    <button class="btn" style="margin-top: 20px; width:250px;" onclick="location.reload()">Retour au menu</button>
</div>

<script>
// DATABASE
const woordenLijst = [
    {t:8, nl:"zich verplaatsen", fr:"se d√©placer"}, {t:8, nl:"de verplaatsing", fr:"le d√©placement"}, {t:8, nl:"rondrijden", fr:"circuler"}, {t:8, nl:"het verkeer", fr:"la circulation / le trafic"}, {t:8, nl:"gaan naar", fr:"se rendre √† / aller √†"}, {t:8, nl:"terugkeren", fr:"retourner (√†)"}, {t:8, nl:"pendelen", fr:"faire la navette"}, {t:8, nl:"vervoermiddel kiezen", fr:"choisir son mode de transport"}, {t:8, nl:"zachte mobiliteit", fr:"la mobility douce"}, {t:8, nl:"wandeling", fr:"la marche √† pied"}, {t:8, nl:"voetganger", fr:"un pi√©ton"}, {t:8, nl:"voetgangerszone", fr:"une zone pi√©tonne"}, {t:8, nl:"het trottoir", fr:"le trottoir"}, {t:8, nl:"rechtsomkeer maken", fr:"faire demi-tour"}, {t:8, nl:"straat oversteken", fr:"traverser la rue"}, {t:8, nl:"het zebrapad", fr:"le passage pi√©ton"}, {t:8, nl:"trappen (fiets)", fr:"p√©daler"}, {t:8, nl:"een fietser", fr:"un cycliste"}, {t:8, nl:"fietspad", fr:"une piste cyclable"}, {t:8, nl:"fietsenstalling", fr:"un parking √† v√©los"}, {t:8, nl:"de helm", fr:"le casque"}, {t:8, nl:"het stuur (fiets)", fr:"le guidon"}, {t:8, nl:"fietsslot", fr:"l'antivol (m.)"}, {t:8, nl:"de gebruiker", fr:"l'usager (m.)"}, {t:8, nl:"de passagier", fr:"le passager"}, {t:8, nl:"openbaar vervoer", fr:"les transports en commun"}, {t:8, nl:"instappen", fr:"monter (dans)"}, {t:8, nl:"uitstappen", fr:"descendre (de)"}, {t:8, nl:"een halte", fr:"un arr√™t"}, {t:8, nl:"het perron", fr:"le quai"}, {t:8, nl:"abonnement", fr:"un abonnement"}, {t:8, nl:"ticket", fr:"un titre de transport"}, {t:8, nl:"rijbewijs", fr:"le permis"}, {t:8, nl:"auto", fr:"une voiture / une bagnole"}, {t:8, nl:"automobilist", fr:"un automobiliste"}, {t:8, nl:"carpoolen", fr:"faire du covoiturage"}, {t:8, nl:"elektrische wagen", fr:"une voiture √©lectrique"}, {t:8, nl:"laadpaal", fr:"une borne de recharge"}, {t:8, nl:"spitsuren", fr:"les heures de pointe"}, {t:8, nl:"file / opstopping", fr:"un embouteillage / un bouchon"}, {t:8, nl:"wegwerkzaamheden", fr:"les travaux (m.)"}, {t:8, nl:"omleiding", fr:"la d√©viation"}, {t:8, nl:"auto-ongeluk", fr:"un accident de voiture"}, {t:8, nl:"het dak", fr:"le toit"}, {t:8, nl:"de koffer", fr:"le coffre"}, {t:8, nl:"het stuur (auto)", fr:"le volant"}, {t:8, nl:"de band", fr:"le pneu"}, {t:8, nl:"het portier", fr:"la porti√®re"}, {t:8, nl:"lekke band", fr:"le pneu crev√©"}, {t:8, nl:"koplamp", fr:"le phare"}, {t:8, nl:"voorruit", fr:"le pare-brise"}, {t:8, nl:"achteruitkijkspiegel", fr:"le r√©troviseur"}, {t:8, nl:"pinker", fr:"le clignotant"}, {t:8, nl:"elektrische step", fr:"la trottinette √©lectrique"}, {t:8, nl:"steppen", fr:"trottiner"}, {t:8, nl:"hoverboard", fr:"l'hoverboard (m.)"}, {t:8, nl:"segway", fr:"le gyropode"},
    {t:9, nl:"de kunst", fr:"l'art (m.)"}, {t:9, nl:"kunstwerk", fr:"une ≈ìuvre d'art"}, {t:9, nl:"meesterwerk", fr:"un chef-d'≈ìuvre"}, {t:9, nl:"cre√´ren", fr:"cr√©er"}, {t:9, nl:"creativiteit", fr:"la cr√©ativit√©"}, {t:9, nl:"kunstenaar", fr:"un(e) artiste"}, {t:9, nl:"tentoonstelling", fr:"une expo(sition)"}, {t:9, nl:"tentoonstellen", fr:"exposer"}, {t:9, nl:"museum bezoeken", fr:"visiter un mus√©e"}, {t:9, nl:"schilder", fr:"un(e) peintre"}, {t:9, nl:"schilderij / doek", fr:"un tableau / une toile"}, {t:9, nl:"stilleven", fr:"une nature morte"}, {t:9, nl:"landschap", fr:"un paysage"}, {t:9, nl:"portret", fr:"un portrait"}, {t:9, nl:"schetsen", fr:"esquisser / croquer"}, {t:9, nl:"penseel", fr:"un pinceau"}, {t:9, nl:"inlijsten", fr:"encadrer"}, {t:9, nl:"beeldhouwer", fr:"un sculpteur"}, {t:9, nl:"standbeeld", fr:"une statue"}, {t:9, nl:"architectuur", fr:"l'architecture"}, {t:9, nl:"gebouw", fr:"un b√¢timent"}, {t:9, nl:"design", fr:"le design"}, {t:9, nl:"fotografie", fr:"la photographie"}, {t:9, nl:"foto", fr:"un clich√© / une photo"}, {t:9, nl:"straatkunst", fr:"l'art de rue"}, {t:9, nl:"muurschildering", fr:"une fresque"}, {t:9, nl:"stripverhaal", fr:"une BD"}, {t:9, nl:"filmmaker", fr:"un cin√©aste"}, {t:9, nl:"regisseur", fr:"un r√©alisateur"}, {t:9, nl:"trailer", fr:"la bande-annonce"}, {t:9, nl:"scenario", fr:"un sc√©nario"}, {t:9, nl:"special effects", fr:"les effets sp√©ciaux"}, {t:9, nl:"ondertiteling", fr:"le sous-titrage"}, {t:9, nl:"dubben", fr:"doubler"}, {t:9, nl:"originele versie", fr:"la V.O."}, {t:9, nl:"acteur", fr:"un acteur"}, {t:9, nl:"rol spelen", fr:"jouer un r√¥le"}, {t:9, nl:"toneelstuk", fr:"la pi√®ce de th√©√¢tre"}, {t:9, nl:"podium", fr:"la sc√®ne"}, {t:9, nl:"publiek", fr:"le public"}, {t:9, nl:"applaudisseren", fr:"applaudir"}, {t:9, nl:"ik ben dol op", fr:"j'adore"}, {t:9, nl:"interesseert mij", fr:"√ßa m'int√©resse"}, {t:9, nl:"prachtig", fr:"magnifique"}, {t:9, nl:"indrukwekkend", fr:"impressionnant"}, {t:9, nl:"ontroerend", fr:"√©mouvant"}, {t:9, nl:"fascinerend", fr:"fascinant"}, {t:9, nl:"verrassend", fr:"surprenant"}, {t:9, nl:"kleurrijk", fr:"color√©"}, {t:9, nl:"helder", fr:"lumineux"}, {t:9, nl:"uniek", fr:"unique"}, {t:9, nl:"niet mijn ding", fr:"ce n'est pas mon truc"}, {t:9, nl:"overschat", fr:"surcot√©"}, {t:9, nl:"ouderwets", fr:"ringard / de vieux"}, {t:9, nl:"maakt me bang", fr:"me fait peur"}, {t:9, nl:"perplex", fr:"perplexe"}, {t:9, nl:"eenzaamheid", fr:"la solitude"}, {t:9, nl:"afkeer", fr:"le d√©go√ªt"}, {t:9, nl:"verveling", fr:"l'ennui (m.)"}, {t:9, nl:"lelijk", fr:"moche"},
    {t:10, nl:"Frankrijk", fr:"l'Hexagone (m.)"}, {t:10, nl:"de streek", fr:"la r√©gion"}, {t:10, nl:"departement", fr:"le d√©partement"}, {t:10, nl:"platteland", fr:"la campagne"}, {t:10, nl:"het dorp", fr:"le village"}, {t:10, nl:"de grens", fr:"la fronti√®re"}, {t:10, nl:"toerist / bezoeker", fr:"le touriste / visiteur"}, {t:10, nl:"bureau voor toerisme", fr:"l'office du tourisme"}, {t:10, nl:"zich informeren", fr:"se renseigner"}, {t:10, nl:"verblijf organiseren", fr:"organiser un s√©jour"}, {t:10, nl:"georganiseerde reis", fr:"un voyage organis√©"}, {t:10, nl:"road trip", fr:"un road trip"}, {t:10, nl:"route / traject", fr:"un itin√©raire"}, {t:10, nl:"rondreis", fr:"un circuit"}, {t:10, nl:"reserveren", fr:"r√©server / faire une r√©sa"}, {t:10, nl:"verhuurbedrijf", fr:"une agence de location"}, {t:10, nl:"bestemming kiezen", fr:"choisir une destination"}, {t:10, nl:"accommodatie", fr:"l'h√©bergement (m.)"}, {t:10, nl:"gastronomie", fr:"la gastronomie"}, {t:10, nl:"lokale specialiteit", fr:"la sp√©cialit√© locale"}, {t:10, nl:"cruise maken", fr:"faire une croisi√®re"}, {t:10, nl:"toeristische site", fr:"le site touristique"}, {t:10, nl:"monument", fr:"le monument historique"}, {t:10, nl:"het kasteel", fr:"le ch√¢teau"}, {t:10, nl:"wijngaard", fr:"le vignoble"}, {t:10, nl:"cultureel erfgoed", fr:"le patrimoine culturel"}, {t:10, nl:"trekpleister", fr:"le p√¥le d'attraction"}, {t:10, nl:"klimaat", fr:"le climat"}, {t:10, nl:"bewolkte lucht", fr:"le ciel nuageux"}, {t:10, nl:"zonnig", fr:"ensoleill√©"}, {t:10, nl:"de wind", fr:"le vent"}, {t:10, nl:"regenbui", fr:"une averse"}, {t:10, nl:"opklaringen", fr:"les √©claircies (f.)"}, {t:10, nl:"de sneeuw", fr:"la neige"}, {t:10, nl:"dicht bij", fr:"pr√®s de / aux environs de"}, {t:10, nl:"niet ver van", fr:"loin de"}, {t:10, nl:"naast", fr:"√† c√¥t√© de"}, {t:10, nl:"tegenover", fr:"en face de"}, {t:10, nl:"ten noorden van", fr:"au nord de"}, {t:10, nl:"ten zuiden van", fr:"au sud de"}, {t:10, nl:"het zicht", fr:"la vue"}, {t:10, nl:"plantengroei", fr:"la v√©g√©tation"}, {t:10, nl:"bossen", fr:"des for√™ts"}, {t:10, nl:"vallei", fr:"une vall√©e"}, {t:10, nl:"heuvel", fr:"une colline"}, {t:10, nl:"berg", fr:"une montagne"}, {t:10, nl:"rivier", fr:"une rivi√®re / un fleuve"}, {t:10, nl:"de zee", fr:"la mer"}, {t:10, nl:"de oceaan", fr:"l'oc√©an"}, {t:10, nl:"de baai", fr:"la baie"}, {t:10, nl:"de kust", fr:"le littoral / la c√¥te"}, {t:10, nl:"het strand", fr:"la plage"}, {t:10, nl:"de klif", fr:"la falaise"}, {t:10, nl:"schilderachtig", fr:"pittoresque"}, {t:10, nl:"heuvelachtig", fr:"vallonn√©"}
];

let allSets = [];
let currentSetIdx = 0, wordIdx = 0, timeLeft = 10, isPaused = false, interval;

function generateSets(themaNum) {
    if (!themaNum) return;
    
    const storageKey = 'pelckmans_thema_' + themaNum;
    const savedData = localStorage.getItem(storageKey);

    if (savedData) {
        allSets = JSON.parse(savedData);
    } else {
        const gefilterd = woordenLijst.filter(w => w.t == themaNum);
        allSets = [];
        let currentPointer = 0;

        for (let i = 0; i < 10; i++) {
            let set = [];
            if (i === 0) {
                for(let k=0; k<14; k++) { set.push(gefilterd[k % gefilterd.length]); }
                currentPointer = 14; 
            } else {
                const overlap = allSets[i-1].slice(-5);
                let nieuweWoorden = [];
                for (let k = 0; k < 9; k++) {
                    nieuweWoorden.push(gefilterd[currentPointer % gefilterd.length]);
                    currentPointer++;
                }
                set = [...overlap, ...nieuweWoorden];
            }
            allSets.push(set);
        }
    }
    renderGrid();
}

function renderGrid() {
    const grid = document.getElementById('set-grid');
    grid.innerHTML = '';
    allSets.forEach((set, i) => {
        const card = document.createElement('div');
        card.className = 'set-card';
        card.innerHTML = `
            <h3>S√©rie ${i+1}</h3>
            <p style="color:#888; font-size:14px;">${set.length} mots</p>
            <button class="btn" onclick="startSet(${i})">üöÄ Commencer</button>
            <button class="btn btn-secondary" onclick="openEdit(${i})">üìù Voir/Modifier</button>
        `;
        grid.appendChild(card);
    });
}

function openEdit(idx) {
    currentSetIdx = idx;
    document.getElementById('edit-title').innerText = `S√©rie ${idx + 1}`;
    const tbody = document.getElementById('edit-body');
    tbody.innerHTML = '';
    allSets[idx].forEach((word) => addTableRow(word.nl, word.fr));
    document.getElementById('edit-screen').style.display = 'flex';
}

function addTableRow(nl = "", fr = "") {
    const tbody = document.getElementById('edit-body');
    const row = document.createElement('tr');
    row.innerHTML = `
        <td><input type="text" class="edit-nl" value="${nl}"></td>
        <td><input type="text" class="edit-fr" value="${fr}"></td>
        <td><button onclick="this.parentElement.parentElement.remove()" style="color:red; background:none; border:none; cursor:pointer;">‚úñ</button></td>
    `;
    tbody.appendChild(row);
}

function addRow() { addTableRow(); }

function saveAndStart() {
    const newWords = [];
    const nlInputs = document.querySelectorAll('.edit-nl');
    const frInputs = document.querySelectorAll('.edit-fr');
    nlInputs.forEach((input, i) => {
        if(input.value.trim() !== "") {
            newWords.push({ nl: input.value, fr: frInputs[i].value });
        }
    });
    
    // Update data en sla op
    allSets[currentSetIdx] = newWords;
    const themaNum = document.getElementById('trajet-select').value;
    localStorage.setItem('pelckmans_thema_' + themaNum, JSON.stringify(allSets));
    
    closeEdit();
    renderGrid();
    startSet(currentSetIdx);
}

function closeEdit() { document.getElementById('edit-screen').style.display = 'none'; }

function startSet(idx) {
    currentSetIdx = idx; wordIdx = 0; isPaused = false;
    document.getElementById('container').style.display = 'none';
    document.getElementById('exercise').style.display = 'flex';
    nextWord();
}

function nextWord() {
    const set = allSets[currentSetIdx];
    if (wordIdx >= set.length) { showResults(); return; }
    
    timeLeft = 10; 
    document.getElementById('word-display').innerText = set[wordIdx].nl;
    document.getElementById('info-header').innerText = `S√©rie ${currentSetIdx+1} ‚Äî Mot ${wordIdx+1}/${set.length}`;
    updateTimerBar();

    if (interval) clearInterval(interval);
    interval = setInterval(() => {
        if (!isPaused) {
            timeLeft--; 
            updateTimerBar();
            if (timeLeft <= 0) { 
                wordIdx++; 
                nextWord(); 
            }
        }
    }, 1000);
}

function updateTimerBar() {
    const bar = document.getElementById('timer-bar');
    bar.style.width = (timeLeft / 10 * 100) + '%';
    bar.style.backgroundColor = timeLeft < 3 ? 'var(--danger)' : 'var(--success)';
}

function togglePause() {
    isPaused = !isPaused;
    document.getElementById('pause-btn').innerText = isPaused ? "Reprendre" : "Pause";
}

function showResults() {
    clearInterval(interval);
    document.getElementById('exercise').style.display = 'none';
    document.getElementById('result').style.display = 'flex';
    document.getElementById('res-body').innerHTML = allSets[currentSetIdx].map(w => `
        <tr><td>${w.nl}</td><td style="color:var(--primary); font-weight:bold;">${w.fr}</td></tr>
    `).join('');
}
</script>

</body>
</html>
